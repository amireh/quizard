define("rsvp/all",["./promise","exports"],function(t,e){var n=t["default"];e["default"]=function(t,e){return n.all(t,e)}}),define("rsvp/all_settled",["./promise","./utils","exports"],function(t,e,n){function r(t){return{state:"fulfilled",value:t}}function i(t){return{state:"rejected",reason:t}}var s=t["default"],o=e.isArray,a=e.isNonThenable;n["default"]=function(t,e){return new s(function(e){function n(t){return function(e){c(t,r(e))}}function u(t){return function(e){c(t,i(e))}}function c(t,n){f[t]=n,0===--l&&e(f)}if(!o(t))throw new TypeError("You must pass an array to allSettled.");var h,l=t.length;if(0===l)return void e([]);for(var f=new Array(l),d=0;d<t.length;d++)h=t[d],a(h)?c(d,r(h)):s.resolve(h).then(n(d),u(d))},e)}}),define("rsvp/asap",["exports"],function(t){function e(){return function(){process.nextTick(i)}}function n(){var t=0,e=new a(i),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function r(){return function(){setTimeout(i,1)}}function i(){for(var t=0;t<u.length;t++){var e=u[t],n=e[0],r=e[1];n(r)}u=[]}t["default"]=function(t,e){var n=u.push([t,e]);1===n&&s()};var s,o="undefined"!=typeof window?window:{},a=o.MutationObserver||o.WebKitMutationObserver,u=[];s="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?e():a?n():r()}),define("rsvp/config",["./events","exports"],function(t,e){function n(t,e){return"onerror"===t?void i.on("error",e):2!==arguments.length?i[t]:void(i[t]=e)}var r=t["default"],i={instrument:!1};r.mixin(i),e.config=i,e.configure=n}),define("rsvp/defer",["./promise","exports"],function(t,e){var n=t["default"];e["default"]=function(t){var e={};return e.promise=new n(function(t,n){e.resolve=t,e.reject=n},t),e}}),define("rsvp/events",["exports"],function(t){var e=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},n=function(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e};t["default"]={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,r){var i,s=n(this);i=s[t],i||(i=s[t]=[]),-1===e(i,r)&&i.push(r)},off:function(t,r){var i,s,o=n(this);return r?(i=o[t],s=e(i,r),void(-1!==s&&i.splice(s,1))):void(o[t]=[])},trigger:function(t,e){var r,i,s=n(this);if(r=s[t])for(var o=0;o<r.length;o++)(i=r[o])(e)}}}),define("rsvp/filter",["./all","./map","./utils","exports"],function(t,e,n,r){function i(t,e,n){return s(t,n).then(function(r){if(!u(t))throw new TypeError("You must pass an array to filter.");if(!a(e))throw new TypeError("You must pass a function to filter's second argument.");return o(t,e,n).then(function(t){var e,n=r.length,i=[];for(e=0;n>e;e++)t[e]&&i.push(r[e]);return i})})}var s=t["default"],o=e["default"],a=n.isFunction,u=n.isArray;r["default"]=i}),define("rsvp/hash",["./promise","./utils","exports"],function(t,e,n){var r=t["default"],i=e.isNonThenable,s=e.keysOf;n["default"]=function(t){return new r(function(e,n){function o(t){return function(n){h[t]=n,0===--f&&e(h)}}function a(t){f=0,n(t)}var u,c,h={},l=s(t),f=l.length;if(0===f)return void e(h);for(var d=0;d<l.length;d++)c=l[d],u=t[c],i(u)?(h[c]=u,0===--f&&e(h)):r.resolve(u).then(o(c),a)})}}),define("rsvp/hash_settled",["./promise","./utils","exports"],function(t,e,n){function r(t){return{state:"fulfilled",value:t}}function i(t){return{state:"rejected",reason:t}}var s=t["default"],o=e.isNonThenable,a=e.keysOf;n["default"]=function(t){return new s(function(e){function n(t){return function(e){c(t,r(e))}}function u(t){return function(e){c(t,i(e))}}function c(t,n){f[t]=n,0===--p&&e(f)}var h,l,f={},d=a(t),p=d.length;if(0===p)return void e(f);for(var g=0;g<d.length;g++)l=d[g],h=t[l],o(h)?c(l,r(h)):s.resolve(h).then(n(l),u(l))})}}),define("rsvp/instrument",["./config","./utils","exports"],function(t,e,n){var r=t.config,i=e.now;n["default"]=function(t,e,n){try{r.trigger(t,{guid:e._guidKey+e._id,eventName:t,detail:e._detail,childGuid:n&&e._guidKey+n._id,label:e._label,timeStamp:i(),stack:new Error(e._label).stack})}catch(s){setTimeout(function(){throw s},0)}}}),define("rsvp/map",["./promise","./utils","exports"],function(t,e,n){var r=t["default"],i=e.isArray,s=e.isFunction;n["default"]=function(t,e,n){return r.all(t,n).then(function(o){if(!i(t))throw new TypeError("You must pass an array to map.");if(!s(e))throw new TypeError("You must pass a function to map's second argument.");var a,u=o.length,c=[];for(a=0;u>a;a++)c.push(e(o[a]));return r.all(c,n)})}}),define("rsvp/node",["./promise","./utils","exports"],function(t,e,n){var r=t["default"],i=e.isArray;n["default"]=function(t,e){return function(){for(var n=arguments.length,s=new Array(n),o=0;n>o;o++)s[o]=arguments[o];var a,u=e===!0,c=i(e);return u||c||!e?a=this:(console.warn('Deprecation: RSVP.denodeify() doesn\'t allow setting the "this" binding anymore. Use yourFunction.bind(yourThis) instead.'),a=e),r.all(s).then(function(n){function i(r,i){function s(){for(var t=arguments.length,n=new Array(t),s=0;t>s;s++)n[s]=arguments[s];var o=n[0],a=n[1];if(o)i(o);else if(u)r(n.slice(1));else if(c){var h,l,f={},d=n.slice(1);for(l=0;l<e.length;l++)h=e[l],f[h]=d[l];r(f)}else r(a)}n.push(s),t.apply(a,n)}return new r(i)})}}}),define("rsvp/promise",["./config","./events","./instrument","./utils","./promise/cast","./promise/all","./promise/race","./promise/resolve","./promise/reject","exports"],function(t,e,n,r,i,s,o,a,u,c){function h(){}function l(t,e){if(!C(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._id=M++,this._label=e,this._subscribers=[],w.instrument&&P("created",this),h!==t&&f(t,this)}function f(t,e){function n(t){m(e,t)}function r(t){x(e,t)}try{t(n,r)}catch(i){r(i)}}function d(t,e,n,r){var i=t._subscribers,s=i.length;i[s]=e,i[s+q]=n,i[s+H]=r}function p(t,e){var n,r,i=t._subscribers,s=t._detail;w.instrument&&P(e===q?"fulfilled":"rejected",t);for(var o=0;o<i.length;o+=3)n=i[o],r=i[o+e],g(e,n,r,s);t._subscribers=null}function g(t,e,n,r){var i,s,o,a,u=C(n);if(u)try{i=n(r),o=!0}catch(c){a=!0,s=c}else i=r,o=!0;v(e,i)||(u&&o?m(e,i):a?x(e,s):t===q?m(e,i):t===H&&x(e,i))}function v(t,e){var n,r=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(A(e)&&(r=e.then,C(r)))return r.call(e,function(r){return n?!0:(n=!0,void(e!==r?m(t,r):y(t,r)))},function(e){return n?!0:(n=!0,void x(t,e))},"Settle: "+(t._label||" unknown promise")),!0}catch(i){return n?!0:(x(t,i),!0)}return!1}function m(t,e){t===e?y(t,e):v(t,e)||y(t,e)}function y(t,e){t._state===R&&(t._state=L,t._detail=e,w.async(_,t))}function x(t,e){t._state===R&&(t._state=L,t._detail=e,w.async(b,t))}function _(t){p(t,t._state=q)}function b(t){t._onerror&&t._onerror(t._detail),p(t,t._state=H)}var w=t.config,P=(e["default"],n["default"]),A=r.objectOrFunction,C=r.isFunction,S=r.now,I=i["default"],E=s["default"],O=o["default"],j=a["default"],k=u["default"],T="rsvp_"+S()+"-",M=0;c["default"]=l,l.cast=I,l.all=E,l.race=O,l.resolve=j,l.reject=k;var R=void 0,L=0,q=1,H=2;l.prototype={constructor:l,_id:void 0,_guidKey:T,_label:void 0,_state:void 0,_detail:void 0,_subscribers:void 0,_onerror:function(t){w.trigger("error",t)},then:function(t,e,n){var r=this;this._onerror=null;var i=new this.constructor(h,n);if(this._state){var s=arguments;w.async(function(){g(r._state,i,s[r._state-1],r._detail)})}else d(this,i,t,e);return w.instrument&&P("chained",r,i),i},"catch":function(t,e){return this.then(null,t,e)},"finally":function(t,e){var n=this.constructor;return this.then(function(e){return n.cast(t()).then(function(){return e})},function(e){return n.cast(t()).then(function(){throw e})},e)}}}),define("rsvp/promise/all",["../utils","exports"],function(t,e){var n=t.isArray,r=t.isNonThenable;e["default"]=function(t,e){var i=this;return new i(function(e,s){function o(t){return function(n){h[t]=n,0===--c&&e(h)}}function a(t){c=0,s(t)}if(!n(t))throw new TypeError("You must pass an array to all.");var u,c=t.length,h=new Array(c);if(0===c)return void e(h);for(var l=0;l<t.length;l++)u=t[l],r(u)?(h[l]=u,0===--c&&e(h)):i.resolve(u).then(o(l),a)},e)}}),define("rsvp/promise/cast",["exports"],function(t){t["default"]=function(t,e){var n=this;return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)},e)}}),define("rsvp/promise/race",["../utils","exports"],function(t,e){var n=t.isArray,r=(t.isFunction,t.isNonThenable);e["default"]=function(t,e){var i,s=this;return new s(function(e,o){function a(t){c&&(c=!1,e(t))}function u(t){c&&(c=!1,o(t))}if(!n(t))throw new TypeError("You must pass an array to race.");for(var c=!0,h=0;h<t.length;h++){if(i=t[h],r(i))return c=!1,void e(i);s.resolve(i).then(a,u)}},e)}}),define("rsvp/promise/reject",["exports"],function(t){t["default"]=function(t,e){var n=this;return new n(function(e,n){n(t)},e)}}),define("rsvp/promise/resolve",["exports"],function(t){t["default"]=function(t,e){var n=this;return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)},e)}}),define("rsvp/race",["./promise","exports"],function(t,e){var n=t["default"];e["default"]=function(t,e){return n.race(t,e)}}),define("rsvp/reject",["./promise","exports"],function(t,e){var n=t["default"];e["default"]=function(t,e){return n.reject(t,e)}}),define("rsvp/resolve",["./promise","exports"],function(t,e){var n=t["default"];e["default"]=function(t,e){return n.resolve(t,e)}}),define("rsvp/rethrow",["exports"],function(t){t["default"]=function(t){throw setTimeout(function(){throw t}),t}}),define("rsvp/utils",["exports"],function(t){function e(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function r(t){return!e(t)}t.objectOrFunction=e,t.isFunction=n,t.isNonThenable=r;var i;i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var s=i;t.isArray=s;var o=Date.now||function(){return(new Date).getTime()};t.now=o;var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.keysOf=a}),define("rsvp",["./rsvp/promise","./rsvp/events","./rsvp/node","./rsvp/all","./rsvp/all_settled","./rsvp/race","./rsvp/hash","./rsvp/hash_settled","./rsvp/rethrow","./rsvp/defer","./rsvp/config","./rsvp/map","./rsvp/resolve","./rsvp/reject","./rsvp/filter","./rsvp/asap","exports"],function(t,e,n,r,i,s,o,a,u,c,h,l,f,d,p,g,v){function m(t,e){j.async(t,e)}function y(){j.on.apply(j,arguments)}function x(){j.off.apply(j,arguments)}var _=t["default"],b=e["default"],w=n["default"],P=r["default"],A=i["default"],C=s["default"],S=o["default"],I=a["default"],E=u["default"],O=c["default"],j=h.config,k=h.configure,T=l["default"],M=f["default"],R=d["default"],L=p["default"],q=g["default"];if(j.async=q,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var H=window.__PROMISE_INSTRUMENTATION__;k("instrument",!0);for(var z in H)H.hasOwnProperty(z)&&y(z,H[z])}v.Promise=_,v.EventTarget=b,v.all=P,v.allSettled=A,v.race=C,v.hash=S,v.hashSettled=I,v.rethrow=E,v.defer=O,v.denodeify=w,v.configure=k,v.on=y,v.off=x,v.resolve=M,v.reject=R,v.async=m,v.map=T,v.filter=L}),define("when",["rsvp"],function(t){var e,n=t.Promise,r=n.prototype;return r.otherwise=r.catch,r.ensure=r.finally,r.done=r.then,e=function(t,e){return n.cast(t,e)},e.defer=t.defer,e.all=t.all,e}),define("pixy/mixins/react/util",["inflection"],function(){return{getName:function(t){return(t.displayName||t.type.displayName).underscore().camelize()}}}),define("pixy/mixins/react/layout_manager_mixin",["react","lodash","rsvp","./util"],function(t,e,n,r){var i=e.extend,s=[].slice,o=r.getName,a=function(){var t=s.call(arguments),e=t[0];t[0]=o(e)+":",console.debug.apply(console,t)};return{getInitialState:function(){return{}},add:function(t,e,r){var i,s,u=this.type.getLayout(e,this.props,this.state),c=n.defer();return r=r||{},u?u.canAdd(t,r)?(i=u.addComponent(t,r,this.state),a(this,"adding component",o(t),"to layout",e),i?(this.setState(i,c.resolve),c.promise):c.resolve()):(s="Component "+o(t)+" can not be added to the layout "+o(u),c.reject(s)):c.reject('Unknown layout "'+e+'"')},remove:function(t,e,r){var i,s=this.type.getLayout(e,this.props,this.state),u=n.defer();return r=r||{},s?(a(this,"removing component",o(t),"from layout",e),(i=s.removeComponent(t,r,this.state))?(this.setState(i,u.resolve),u.promise):u.resolve()):u.reject('Unknown layout "'+e+'"')},renderLayout:function(t,e,n){var r=t(i({},e,{components:this.getLayoutChildren(t)}));return n?r:this.transferPropsTo(r)},clearLayout:function(t){var e={};e[o(t)]=void 0,this.setState(e)},getLayoutChildren:function(t){return this.state[o(t)]}}}),define("pixy/mixins/react/layout_mixin",["react","underscore","./util"],function(t,e,n){var r=e.contains,i=t.addons.update,s=function(t,e){var n=e.components[t];return n?n&&"function"==typeof n.canMount?n.canMount(e)?n:void 0:n:void 0},o=function(t){return t.defaultOutlet};return{statics:{canAdd:function(t,e){var n=this.availableOutlets?this.availableOutlets():[];return r(n,e.outlet||o(this))},isEmpty:function(t,e){var r,i=t?t.components:e[n.getName(this)];for(r in i)if(i.hasOwnProperty(r)&&i[r])return!1;return!0},addComponent:function(t,e,r){var s,a=n.getName(this),u=e.outlet||o(this),c={};return r[a]?(s={},s[u]={$set:t},c[a]=i(r[a],s)):(c[a]={},c[a][u]=t),c},removeComponent:function(t,e,r){var i,s,a,u=n.getName(this);if(s=e.outlet||o(this),!s){i=r[u];for(s in i)if(i[s]===t){a=!0;break}if(!a)return void 0}return this.addComponent(void 0,{outlet:s},r)}},getDefaultProps:function(){return{components:{}}},hasOutletOccupant:function(t){return!!s(t,this.props)},renderOutlet:function(t,e,n){var r=s(t,this.props);return r?n?r(e):this.transferPropsTo(r(e)):!1}}}),define("pixy/mixins/react/stacked_layout_mixin",["react","underscore","./util"],function(t,e,n){var r=e.without,i=t.addons.update,s=n.getName;return{statics:{canAdd:function(){return!0},isEmpty:function(t,e){var n=t?t.components:e[s(this)];return!n||n.length<1},addComponent:function(t,e){var n={},r=s(this);return n[r]=e[r]?i(e[r],{$unshift:[t]}):[t],n},removeComponent:function(t,e){var n={},i=s(this);return n[i]=r(e[i],t),n}},getDefaultProps:function(){return{components:[]}},getNextComponentType:function(){return this.props.components[0]},renderComponent:function(t,e){var n=this.getNextComponentType();return n?e?n(t):this.transferPropsTo(n(t)):void 0}}}),define("pixy/mixins/events",["underscore"],function(t){var e=/\s+/,n=Array.prototype.slice,r=function(t,n,r,i){if(!r)return!0;if("object"==typeof r){for(var s in r)t[n].apply(t,[s,r[s]].concat(i));return!1}if(e.test(r)){for(var o=r.split(e),a=0,u=o.length;u>a;a++)t[n].apply(t,[o[a]].concat(i));return!1}return!0},i=function(t,e){var n,r=-1,i=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s,o);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s,o,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},s={listenTo:"on",listenToOnce:"once"},o={on:function(t,e,n){return r(this,"on",t,[e,n])&&e?(this._events||(this._events={}),this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,context:n,ctx:n||this}),this):this},once:function(e,n,i){if(!r(this,"once",e,[n,i])||!n)return this;var s=this,o=t.once(function(){s.off(e,o),n.apply(this,arguments)});return o._callback=n,this.on(e,o,i)},off:function(e,n,i){var s,o,a,u,c,h,l,f;if(!this._events||!r(this,"off",e,[n,i]))return this;if(!e&&!n&&!i)return this._events={},this;for(u=e?[e]:t.keys(this._events),c=0,h=u.length;h>c;c++)if(e=u[c],a=this._events[e]){if(this._events[e]=s=[],n||i)for(l=0,f=a.length;f>l;l++)o=a[l],(n&&n!==o.callback&&n!==o.callback._callback||i&&i!==o.context)&&s.push(o);s.length||delete this._events[e]}return this},trigger:function(t){if(!this._events)return this;var e=n.call(arguments,1);if(!r(this,"trigger",t,e))return this;var s=this._events[t],o=this._events.all;return s&&i(s,e),o&&i(o,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var s in r)r[s].off(e,n,this),i&&delete this._listeners[s];return this}};return t.each(s,function(e,n){o[n]=function(n,r,i){var s=this._listeners||(this._listeners={}),o=n._listenerId||(n._listenerId=t.uniqueId("l"));return s[o]=n,"object"==typeof r&&(i=this),n[e](r,i,this),this}}),o.bind=o.on,o.unbind=o.off,o}),define("pixy/mixins/logger",["underscore"],function(t){var e="log",n={log:function(){if(!this.options||!this.options.mute){var n,r=this.toString();return n=t.flatten(arguments||[]),n.unshift("["+r+"]: "),console[e].apply(console,n)}},mute:function(){this.__log=this.log,this.log=function(){}},unmute:function(){this.log=this.__log,this.__log=null}};return t.each(["debug","info","warn","error"],function(t){n[t]=function(){var n;return e=t,n=this.log.apply(this,arguments),e="log",n}}),n}),define("pixy/util",[],function(){var t=function(){throw new Error('A "url" property or function must be specified')},e=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return{urlError:t,wrapError:e}}),define("pixy/util/sync",["underscore","../util"],function(t,e){var n=e.urlError,r=t.result,i=t.extend,s=t.contains,o={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"},a=["create","update","patch"];return function(t,e,u){var c,h,l=o[t];return u=u||{},c={type:l,dataType:"json"},u.url||(c.url=r(e,"url")||n()),!u.data&&e&&s(a,t)&&(c.contentType="application/json",c.data=JSON.stringify(u.attrs||e.toJSON(u))),"GET"!==c.type&&(c.processData=!1),h=u.xhr=this.ajax(i(c,u)),e.trigger("request",e,h,u),h}}),define("pixy/namespace",["jquery","underscore","rsvp","./mixins/events","./mixins/logger","./util/sync"],function(t,e,n,r,i,s){var o,a=e.extend,u=this,c=u.Pixy;return o="undefined"!=typeof exports?exports:u.Pixy={},o.VERSION="1.5.1",o.sync=e.bind(s,o),o.$=t,a(o,r,i,{name:"Pixy"}),o.noConflict=function(){return u.Pixy=c,this},o.ajax=function(){return n.Promise.cast(o.$.ajax.apply(o.$,arguments))},o}),define("pixy/util/extend",["underscore"],function(t){var e=[].slice,n=(t.has,function(){var n,r,i,s,o=this;n=e.call(arguments,0),s=t.last(n),t.has(s,"mixins")&&(n=t.union(s.mixins,n)),i=s&&t.has(s,"constructor")?s.constructor:function(){return o.apply(this,arguments)},t.extend(i,o);var a=function(){this.constructor=i};return a.prototype=o.prototype,i.prototype=new a,r=t.clone(o.prototype.__mixinInitializers__||[]),t.each(n,function(t,e){if(e+1!==n.length){var i=t.__initialize__;i?r.push(i):console.warn("looks like mixin has no initialize?",t)}}),r.length&&(i.prototype.__mixinInitializers__=r),n.unshift(i.prototype),t.extend.apply(t,n),i});return n.withoutMixins=function(n){var r,i,n,s=this;r=e.call(arguments,0),n=t.last(r),t.has(n,"mixins")&&(r=t.union(n.mixins,r)),i=n&&t.has(n,"constructor")?n.constructor:function(){return s.apply(this,arguments)},t.extend(i,s);var o=function(){this.constructor=i};return o.prototype=s.prototype,i.prototype=new o,t.extend(i.prototype,n),i},n}),define("pixy/object",["underscore","./namespace","./util/extend","./mixins/events","./mixins/logger"],function(t,e,n,r,i){var s=function(){},o=[].slice,a=function(){t.each(this.__mixinInitializers__,function(t){try{t.apply(this,[])}catch(e){console.warn("Mixin failed to initialize:",e.stack)}},this),delete this.__mixinInitializers__},u=function(n,r,i){return arguments.length<=1&&(i=o.call(arguments),n="object",r=s),n=n||"object",e.trigger(n+":creating",this),a.call(this),t.isFunction(r)?r.call(this):console.warn("Pixy::Object: expected a constructor function, got:",typeof r,this),this.initialize.apply(this,i),e.trigger(n+":created",this),this};return t.extend(u.prototype,r,i,{name:"Object",initialize:function(){},toString:function(){return this.name||this.id}}),u.extend=n,u}),define("pixy/core/dispatcher",["underscore","rsvp","../object"],function(t,e,n){var r=[],i=(String.prototype.camelize,String.prototype.underscore,t.extend),s=0,o=/^([^:]+):(.*)$/,a=n.extend({name:"Dispatcher",dispatch:function(t,n,a){var u,c,h,l=[],f=(""+t).match(o);f&&(c=f[1],h=f[2]);var d=i({},a,{id:h,storeKey:c,type:t,index:++s,payload:n});return console.debug("Dispatching action:",d),r.forEach(function(t){l.push(t(d))}),u={promise:e.all(l),index:d.index,actionIndex:d.index}},register:function(t){r.push(t)}});return new a}),define("pixy/mixins/react/actor_mixin",["require","../../core/dispatcher"],function(t){var e=t("../../core/dispatcher"),n={getInitialState:function(){return{actionIndex:null}},getDefaultProps:function(){return{storeError:null}},componentWillReceiveProps:function(t){var e=t.storeError;e&&e.actionIndex===this.state.actionIndex&&this.setState({storeError:e})},componentDidUpdate:function(){this.state.storeError&&(this.onStoreError&&this.onStoreError(this.state.storeError),this.setState({storeError:null}))},trackAction:function(t){this.setState({actionIndex:t.index})},sendAction:function(t,n){var r=this.setState.bind(this),i=e.dispatch(t,n,{source:"VIEW_ACTION"});return this.trackAction(i),i.promise.then(null,function(t){r({storeError:{actionIndex:i.index,error:t}})}),i.promise}};return n}),define("pixy/ext/react",["require","react","../mixins/react/layout_manager_mixin","../mixins/react/layout_mixin","../mixins/react/stacked_layout_mixin","../mixins/react/actor_mixin"],function(t){var e=t("react"),n=t("../mixins/react/layout_manager_mixin"),r=t("../mixins/react/layout_mixin"),i=t("../mixins/react/stacked_layout_mixin"),s=t("../mixins/react/actor_mixin");return e.addons.LayoutManagerMixin=n,e.addons.LayoutMixin=r,e.addons.StackedLayoutMixin=i,e.addons.ActorMixin=s,e}),define("pixy/ext/jquery/form_serializer",["jquery"],function(t){var e=function(t,e){this.options=e||{},this._helper=t,this._object={},this._pushes={},this._patterns={validate:/^[a-z][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i}};e.prototype._convert=function(e){var n=e;if(this.options.convert)if(t.isArray(n))n=_.map(n,function(t){return this._convert(t)},this);else{if(t.isNumeric(n)&&Number(n))return parseFloat(n,10);if("true"===n)return!0;if("false"===n)return!1}return n},e.prototype._build=function(t,e,n){return t[e]=n,t},e.prototype._makeObject=function(t,e){for(var n,r=t.match(this._patterns.key);void 0!==(n=r.pop());)if(this._patterns.push.test(n)){var i=this._incrementPush(t.replace(/\[\]$/,""));e=this._build([],i,this._convert(e))}else this._patterns.fixed.test(n)?e=this._build([],n,this._convert(e)):this._patterns.named.test(n)&&(e=this._build({},n,this._convert(e)));return e},e.prototype._incrementPush=function(t){return void 0===this._pushes[t]&&(this._pushes[t]=0),this._pushes[t]++},e.prototype.addPair=function(t){if(!this._patterns.validate.test(t.name))return this;var e=this._makeObject(t.name,t.value);return this._object=this._helper.extend(!0,this._object,e),this},e.prototype.addPairs=function(t){var e=this;if(!this._helper.isArray(t))throw new Error("formSerializer.addPairs expects an Array");return t.forEach(function(t){e.addPair(t)}),this},e.prototype.serialize=function(){return this._object||{}},e.prototype.serializeJSON=function(){return JSON.stringify(this.serialize())};var n=function(t){if("function"!=typeof t.extend)throw new Error("jQuery is required to use jquery-serialize-object");this.extend=t.extend,this.isArray="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},r=new n(t||{});return function(n){var i=t(this);return i.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):new e(r,n).addPairs(i.serializeArray()).serialize()}}),define("pixy/ext/jquery",["jquery","./jquery/form_serializer"],function(t,e){return t.consume?console.log("$.consume() is already defined, will not override the definition"):t.consume=function(t){return t?(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.cancelBubble=!0,t.returnValue=!1,!1):void 0},t.fn.serializeObject=e,t}),define("route-recognizer",["exports"],function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){this.string=t}function r(t){this.name=t}function i(t){this.name=t}function s(){}function o(t,e,o){"/"===t.charAt(0)&&(t=t.substr(1));for(var a=t.split("/"),u=[],c=0,h=a.length;h>c;c++){var l,f=a[c];(l=f.match(/^:([^\/]+)$/))?(u.push(new r(l[1])),e.push(l[1]),o.dynamics++):(l=f.match(/^\*([^\/]+)$/))?(u.push(new i(l[1])),e.push(l[1]),o.stars++):""===f?u.push(new s):(u.push(new n(f)),o.statics++)}return u}function a(t){this.charSpec=t,this.nextStates=[]}function u(t){return t.sort(function(t,e){if(t.types.stars!==e.types.stars)return t.types.stars-e.types.stars;if(t.types.stars){if(t.types.statics!==e.types.statics)return e.types.statics-t.types.statics;if(t.types.dynamics!==e.types.dynamics)return e.types.dynamics-t.types.dynamics}return t.types.dynamics!==e.types.dynamics?t.types.dynamics-e.types.dynamics:t.types.statics!==e.types.statics?e.types.statics-t.types.statics:0})}function c(t,e){for(var n=[],r=0,i=t.length;i>r;r++){var s=t[r];n=n.concat(s.match(e))}return n}function h(t){this.queryParams=t||{}}function l(t,e,n){for(var r=t.handlers,i=t.regex,s=e.match(i),o=1,a=new h(n),u=0,c=r.length;c>u;u++){for(var l=r[u],f=l.names,d={},p=0,g=f.length;g>p;p++)d[f[p]]=s[o++];a.push({handler:l.handler,params:d,isDynamic:!!f.length})}return a}function f(t,e){return e.eachChar(function(e){t=t.put(e)}),t}function d(t,e,n){this.path=t,this.matcher=e,this.delegate=n}function p(t){this.routes={},this.children={},this.target=t}function g(t,e,n){return function(r,i){var s=t+r;return i?void i(g(s,e,n)):new d(t+r,e,n)}}function v(t,e,n){for(var r=0,i=0,s=t.length;s>i;i++)r+=t[i].path.length;e=e.substr(r);var o={path:e,handler:n};t.push(o)}function m(t,e,n,r){var i=e.routes;for(var s in i)if(i.hasOwnProperty(s)){var o=t.slice();v(o,s,i[s]),e.children[s]?m(o,e.children[s],n,r):n.call(r,o)}}var y=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],x=new RegExp("(\\"+y.join("|\\")+")","g");n.prototype={eachChar:function(t){for(var e,n=this.string,r=0,i=n.length;i>r;r++)e=n.charAt(r),t({validChars:e})},regex:function(){return this.string.replace(x,"\\$1")},generate:function(){return this.string}},r.prototype={eachChar:function(t){t({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(t){return t[this.name]}},i.prototype={eachChar:function(t){t({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(t){return t[this.name]}},s.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},a.prototype={get:function(t){for(var e=this.nextStates,n=0,r=e.length;r>n;n++){var i=e[n],s=i.charSpec.validChars===t.validChars;if(s=s&&i.charSpec.invalidChars===t.invalidChars)return i}},put:function(t){var e;return(e=this.get(t))?e:(e=new a(t),this.nextStates.push(e),t.repeat&&e.nextStates.push(e),e)},match:function(t){for(var e,n,r,i=this.nextStates,s=[],o=0,a=i.length;a>o;o++)e=i[o],n=e.charSpec,"undefined"!=typeof(r=n.validChars)?-1!==r.indexOf(t)&&s.push(e):"undefined"!=typeof(r=n.invalidChars)&&-1===r.indexOf(t)&&s.push(e);return s}};var _=Object.create||function(t){function e(){}return e.prototype=t,new e};h.prototype=_({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var b=function(){this.rootState=new a,this.names={}};b.prototype={add:function(t,e){for(var n,r=this.rootState,i="^",a={statics:0,dynamics:0,stars:0},u=[],c=[],h=!0,l=0,d=t.length;d>l;l++){var p=t[l],g=[],v=o(p.path,g,a);c=c.concat(v);for(var m=0,y=v.length;y>m;m++){var x=v[m];x instanceof s||(h=!1,r=r.put({validChars:"/"}),i+="/",r=f(r,x),i+=x.regex())}var _={handler:p.handler,names:g};u.push(_)}h&&(r=r.put({validChars:"/"}),i+="/"),r.handlers=u,r.regex=new RegExp(i+"$"),r.types=a,(n=e&&e.as)&&(this.names[n]={segments:c,handlers:u})},handlersFor:function(t){var e=this.names[t],n=[];if(!e)throw new Error("There is no route named "+t);for(var r=0,i=e.handlers.length;i>r;r++)n.push(e.handlers[r]);return n},hasRoute:function(t){return!!this.names[t]},generate:function(t,e){var n=this.names[t],r="";if(!n)throw new Error("There is no route named "+t);for(var i=n.segments,o=0,a=i.length;a>o;o++){var u=i[o];u instanceof s||(r+="/",r+=u.generate(e))}return"/"!==r.charAt(0)&&(r="/"+r),e&&e.queryParams&&(r+=this.generateQueryString(e.queryParams,n.handlers)),r},generateQueryString:function(t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i);r.sort();for(var s=0,o=r.length;o>s;s++){i=r[s];var a=t[i];if(null!=a){var u=i;if(e(a))for(var c=0,h=a.length;h>c;c++){var l=i+"[]="+encodeURIComponent(a[c]);n.push(l)}else u+="="+encodeURIComponent(a),n.push(u)}}return 0===n.length?"":"?"+n.join("&")},parseQueryString:function(t){for(var e=t.split("&"),n={},r=0;r<e.length;r++){var i,s=e[r].split("="),o=decodeURIComponent(s[0]),a=o.length,u=!1;1===s.length?i="true":(a>2&&"[]"===o.slice(a-2)&&(u=!0,o=o.slice(0,a-2),n[o]||(n[o]=[])),i=s[1]?decodeURIComponent(s[1]):""),u?n[o].push(i):n[o]=decodeURIComponent(i)}return n},recognize:function(t){var e,n,r,i,s=[this.rootState],o={},a=!1;if(t=decodeURI(t),i=t.indexOf("?"),-1!==i){var h=t.substr(i+1,t.length);t=t.substr(0,i),o=this.parseQueryString(h)}for("/"!==t.charAt(0)&&(t="/"+t),e=t.length,e>1&&"/"===t.charAt(e-1)&&(t=t.substr(0,e-1),a=!0),n=0,r=t.length;r>n&&(s=c(s,t.charAt(n)),s.length);n++);var f=[];for(n=0,r=s.length;r>n;n++)s[n].handlers&&f.push(s[n]);s=u(f);var d=f[0];return d&&d.handlers?(a&&"(.+)$"===d.regex.source.slice(-5)&&(t+="/"),l(d,t,o)):void 0}},t["default"]=b,d.prototype={to:function(t,e){var n=this.delegate;if(n&&n.willAddRoute&&(t=n.willAddRoute(this.matcher.target,t)),this.matcher.add(this.path,t),e){if(0===e.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,t,e,this.delegate)}return this}},p.prototype={add:function(t,e){this.routes[t]=e},addChild:function(t,e,n,r){var i=new p(e);this.children[t]=i;var s=g(t,i,r);r&&r.contextEntered&&r.contextEntered(e,s),n(s)}},b.prototype.map=function(t,e){var n=new p;t(g("",n,this.delegate)),m([],n,function(t){e?e(this,t):this.add(t)},this)}}),define("router/handler-info",["./utils","rsvp/promise","exports"],function(t,e,n){function r(t){var e=t||{};o(this,e),this.initialize(e)}function i(t,e){if(!t^!e)return!1;if(!t)return!0;for(var n in t)if(t.hasOwnProperty(n)&&t[n]!==e[n])return!1;return!0}var s=t.bind,o=t.merge,a=(t.serialize,t.promiseLabel),u=e["default"];r.prototype={name:null,handler:null,params:null,context:null,factory:null,initialize:function(){},log:function(t,e){t.log&&t.log(this.name+": "+e)},promiseLabel:function(t){return a("'"+this.name+"' "+t)},getUnresolved:function(){return this},serialize:function(){return this.params||{}},resolve:function(t,e){var n=s(this,this.checkForAbort,t),r=s(this,this.runBeforeModelHook,e),i=s(this,this.getModel,e),o=s(this,this.runAfterModelHook,e),a=s(this,this.becomeResolved,e);return u.resolve(void 0,this.promiseLabel("Start handler")).then(n,null,this.promiseLabel("Check for abort")).then(r,null,this.promiseLabel("Before model")).then(n,null,this.promiseLabel("Check if aborted during 'beforeModel' hook")).then(i,null,this.promiseLabel("Model")).then(n,null,this.promiseLabel("Check if aborted in 'model' hook")).then(o,null,this.promiseLabel("After model")).then(n,null,this.promiseLabel("Check if aborted in 'afterModel' hook")).then(a,null,this.promiseLabel("Become resolved"))},runBeforeModelHook:function(t){return t.trigger&&t.trigger(!0,"willResolveModel",t,this.handler),this.runSharedModelHook(t,"beforeModel",[])
},runAfterModelHook:function(t,e){var n=this.name;return this.stashResolvedModel(t,e),this.runSharedModelHook(t,"afterModel",[e]).then(function(){return t.resolvedModels[n]},null,this.promiseLabel("Ignore fulfillment value and return model value"))},runSharedModelHook:function(t,e,n){this.log(t,"calling "+e+" hook"),this.queryParams&&n.push(this.queryParams),n.push(t);var r=this.handler,i=r[e]&&r[e].apply(r,n);return i&&i.isTransition&&(i=null),u.resolve(i,null,this.promiseLabel("Resolve value returned from one of the model hooks"))},getModel:null,checkForAbort:function(t,e){return u.resolve(t(),this.promiseLabel("Check for abort")).then(function(){return e},null,this.promiseLabel("Ignore fulfillment value and continue"))},stashResolvedModel:function(t,e){t.resolvedModels=t.resolvedModels||{},t.resolvedModels[this.name]=e},becomeResolved:function(t,e){var n=this.serialize(e);return t&&(this.stashResolvedModel(t,e),t.params=t.params||{},t.params[this.name]=n),this.factory("resolved",{context:e,name:this.name,handler:this.handler,params:n})},shouldSupercede:function(t){if(!t)return!0;var e=t.context===this.context;return t.name!==this.name||this.hasOwnProperty("context")&&!e||this.hasOwnProperty("params")&&!i(this.params,t.params)}},n["default"]=r}),define("router/handler-info/factory",["router/handler-info/resolved-handler-info","router/handler-info/unresolved-handler-info-by-object","router/handler-info/unresolved-handler-info-by-param","exports"],function(t,e,n,r){function i(t,e){var n=i.klasses[t],r=new n(e||{});return r.factory=i,r}var s=t["default"],o=e["default"],a=n["default"];i.klasses={resolved:s,param:a,object:o},r["default"]=i}),define("router/handler-info/resolved-handler-info",["../handler-info","router/utils","rsvp/promise","exports"],function(t,e,n,r){var i=t["default"],s=e.subclass,o=(e.promiseLabel,n["default"]),a=s(i,{resolve:function(t,e){return e&&e.resolvedModels&&(e.resolvedModels[this.name]=this.context),o.resolve(this,this.promiseLabel("Resolve"))},getUnresolved:function(){return this.factory("param",{name:this.name,handler:this.handler,params:this.params})},isResolved:!0});r["default"]=a}),define("router/handler-info/unresolved-handler-info-by-object",["../handler-info","router/utils","rsvp/promise","exports"],function(t,e,n,r){var i=t["default"],s=(e.merge,e.subclass),o=(e.promiseLabel,e.isParam),a=n["default"],u=s(i,{getModel:function(t){return this.log(t,this.name+": resolving provided model"),a.resolve(this.context)},initialize:function(t){this.names=t.names||[],this.context=t.context},serialize:function(t){var e=t||this.context,n=this.names,r=this.handler,i={};if(o(e))return i[n[0]]=e,i;if(r.serialize)return r.serialize(e,n);if(1===n.length){var s=n[0];return i[s]=/_id$/.test(s)?e.id:e,i}}});r["default"]=u}),define("router/handler-info/unresolved-handler-info-by-param",["../handler-info","router/utils","exports"],function(t,e,n){var r=t["default"],i=e.merge,s=e.subclass,o=(e.promiseLabel,s(r,{initialize:function(t){this.params=t.params||{}},getModel:function(t){var e=this.params;t&&t.queryParams&&(e={},i(e,this.params),e.queryParams=t.queryParams);var n="function"==typeof this.handler.deserialize?"deserialize":"model";return this.runSharedModelHook(t,n,[e])}}));n["default"]=o}),define("router/router",["route-recognizer","rsvp/promise","./utils","./transition-state","./transition","./transition-intent/named-transition-intent","./transition-intent/url-transition-intent","./handler-info","exports"],function(t,e,n,r,i,s,o,a,u){function c(){this.recognizer=new _,this.reset()}function h(t,e,n){if(n){t._changedQueryParams=n.changed;for(var r in n.removed)n.removed.hasOwnProperty(r)&&(t._changedQueryParams[r]=null);w(t,e.handlerInfos,!0,["queryParamsDidChange",n.changed,n.all,n.removed]),t._changedQueryParams=null}}function l(t,e,n){var r=d(t.state,e);C(r.exited,function(t){var e=t.handler;delete e.context,e.exit&&e.exit()});var i=t.oldState=t.state;t.state=e;var s=t.currentHandlerInfos=r.unchanged.slice();try{C(r.updatedContext,function(t){return f(s,t,!1,n)}),C(r.entered,function(t){return f(s,t,!0,n)})}catch(o){throw t.state=i,t.currentHandlerInfos=i.handlerInfos,o}t.state.queryParams=y(t,s,e.queryParams,n)}function f(t,e,n,r){var i=e.handler,s=e.context;if(n&&i.enter&&i.enter(r),r&&r.isAborted)throw new M;if(i.context=s,i.contextDidChange&&i.contextDidChange(),i.setup&&i.setup(s,r),r&&r.isAborted)throw new M;return t.push(e),!0}function d(t,e){var n,r,i,s,o,a=t.handlerInfos,u=e.handlerInfos,c={updatedContext:[],exited:[],entered:[],unchanged:[]};for(s=0,o=u.length;o>s;s++){var h=a[s],l=u[s];h&&h.handler===l.handler||(n=!0),n?(c.entered.push(l),h&&c.exited.unshift(h)):r||h.context!==l.context||i?(r=!0,c.updatedContext.push(l)):c.unchanged.push(h)}for(s=u.length,o=a.length;o>s;s++)c.exited.unshift(a[s]);return c}function p(t,e){var n=t.urlMethod;if(n){for(var r=t.router,i=e.handlerInfos,s=i[i.length-1].name,o={},a=i.length-1;a>=0;--a){var u=i[a];S(o,u.params),u.handler.inaccessibleByURL&&(n=null)}if(n){o.queryParams=t._visibleQueryParams||e.queryParams;var c=r.recognizer.generate(s,o);"replace"===n?r.replaceURL(c):r.updateURL(c)}}}function g(t,e){try{P(t.router,t.sequence,"Resolved all models on destination route; finalizing transition.");{var n=t.router,r=e.handlerInfos;t.sequence}return l(n,e,t),t.isAborted?(n.state.handlerInfos=n.currentHandlerInfos,b.reject(k(t))):(p(t,e,t.intent.url),t.isActive=!1,n.activeTransition=null,w(n,n.currentHandlerInfos,!0,["didTransition"]),n.didTransition&&n.didTransition(n.currentHandlerInfos),P(n,t.sequence,"TRANSITION COMPLETE."),r[r.length-1].handler)}catch(i){if(!(i instanceof M)){var s=t.state.handlerInfos;t.trigger(!0,"error",i,t,s[s.length-1].handler),t.abort()}throw i}}function v(t,e,n){var r=e[0]||"/",i=e[e.length-1],s={};i&&i.hasOwnProperty("queryParams")&&(s=q.call(e).queryParams);var o;if(0===e.length){P(t,"Updating query params");var a=t.state.handlerInfos;o=new R({name:a[a.length-1].name,contexts:[],queryParams:s})}else"/"===r.charAt(0)?(P(t,"Attempting URL transition to "+r),o=new L({url:r})):(P(t,"Attempting transition to "+r),o=new R({name:e[0],contexts:A.call(e,1),queryParams:s}));return t.transitionByIntent(o,n)}function m(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;r>n;++n)if(t[n]!==e[n])return!1;return!0}function y(t,e,n,r){for(var i in n)n.hasOwnProperty(i)&&null===n[i]&&delete n[i];var s=[];w(t,e,!0,["finalizeQueryParamChange",n,s,r]),r&&(r._visibleQueryParams={});for(var o={},a=0,u=s.length;u>a;++a){var c=s[a];o[c.key]=c.value,r&&c.visible!==!1&&(r._visibleQueryParams[c.key]=c.value)}return o}function x(t,e,n){var r,i,s,o,a,u=t.state.handlerInfos,c=[],h=null;for(s=0;s<u.length;s++){if(o=u[s],a=e.handlerInfos[s],!a||o.name!==a.name){h=s;break}a.isResolved||c.push(o)}null!==h&&(r=u.slice(h,u.length),i=function(t){for(var e=0;e<r.length;e++)if(r[e].name===t)return!0;return!1},t._triggerWillLeave(r,n,i)),c.length>0&&t._triggerWillChangeContext(c,n),w(t,u,!0,["willTransition",n])}var _=t["default"],b=e["default"],w=n.trigger,P=n.log,A=n.slice,C=n.forEach,S=n.merge,I=(n.serialize,n.extractQueryParams),E=n.getChangelist,O=n.promiseLabel,j=r["default"],k=i.logAbort,T=i.Transition,M=i.TransitionAborted,R=s["default"],L=o["default"],q=(a.ResolvedHandlerInfo,Array.prototype.pop);c.prototype={map:function(t){this.recognizer.delegate=this.delegate,this.recognizer.map(t,function(t,e){for(var n=e.length-1,r=!0;n>=0&&r;--n){var i=e[n];t.add(e,{as:i.handler}),r="/"===i.path||""===i.path||".index"===i.handler.slice(-6)}})},hasRoute:function(t){return this.recognizer.hasRoute(t)},queryParamsTransition:function(t,e,n,r){var i=this;this._changedQueryParams=t.changed;for(var s in t.removed)t.removed.hasOwnProperty(s)&&(this._changedQueryParams[s]=null);if(h(this,r,t),this._changedQueryParams=null,!e&&this.activeTransition)return this.activeTransition;var o=new T(this);return o.queryParamsOnly=!0,n.queryParams=y(this,r.handlerInfos,r.queryParams,o),o.promise=o.promise.then(function(t){return p(o,n,!0),i.didTransition&&i.didTransition(i.currentHandlerInfos),t},null,O("Transition complete")),o},transitionByIntent:function(t,e){var n,r=!!this.activeTransition,i=r?this.activeTransition.state:this.state;try{var s=t.applyToState(i,this.recognizer,this.getHandler,e),o=E(i.queryParams,s.queryParams);return m(s.handlerInfos,i.handlerInfos)?o&&(n=this.queryParamsTransition(o,r,i,s))?n:new T(this):e?void l(this,s):(n=new T(this,t,s),this.activeTransition&&this.activeTransition.abort(),this.activeTransition=n,n.promise=n.promise.then(function(t){return g(n,t.state)},null,O("Settle transition promise when transition is finalized")),r||x(this,s,n),h(this,s,o),n)}catch(a){return new T(this,t,null,a)}},reset:function(){this.state&&C(this.state.handlerInfos,function(t){var e=t.handler;e.exit&&e.exit()}),this.state=new j,this.currentHandlerInfos=null},activeTransition:null,handleURL:function(t){var e=A.call(arguments);return"/"!==t.charAt(0)&&(e[0]="/"+t),v(this,e).method(null)},updateURL:function(){throw new Error("updateURL is not implemented")},replaceURL:function(t){this.updateURL(t)},transitionTo:function(){return v(this,arguments)},intermediateTransitionTo:function(){v(this,arguments,!0)},refresh:function(t){for(var e=this.activeTransition?this.activeTransition.state:this.state,n=e.handlerInfos,r={},i=0,s=n.length;s>i;++i){var o=n[i];r[o.name]=o.params||{}}P(this,"Starting a refresh transition");var a=new R({name:n[n.length-1].name,pivotHandler:t||n[0].handler,contexts:[],queryParams:this._changedQueryParams||e.queryParams||{}});return this.transitionByIntent(a,!1)},replaceWith:function(){return v(this,arguments).method("replace")},generate:function(t){for(var e=I(A.call(arguments,1)),n=e[0],r=e[1],i=new R({name:t,contexts:n}),s=i.applyToState(this.state,this.recognizer,this.getHandler),o={},a=0,u=s.handlerInfos.length;u>a;++a){var c=s.handlerInfos[a],h=c.serialize();S(o,h)}return o.queryParams=r,this.recognizer.generate(t,o)},applyIntent:function(t,e){var n=new R({name:t,contexts:e}),r=this.activeTransition&&this.activeTransition.state||this.state;return n.applyToState(r,this.recognizer,this.getHandler)},isActiveIntent:function(t,e,n){var r,i,s=this.state.handlerInfos;if(!s.length)return!1;var o=s[s.length-1].name,a=this.recognizer.handlersFor(o),u=0;for(i=a.length;i>u&&(r=s[u],r.name!==t);++u);if(u===a.length)return!1;var c=new j;c.handlerInfos=s.slice(0,u+1),a=a.slice(0,u+1);var h=new R({name:o,contexts:e}),l=h.applyToHandlers(c,a,this.getHandler,o,!0,!0),f=m(l.handlerInfos,c.handlerInfos);if(!n||!f)return f;var d={};S(d,n);var p=this.state.queryParams;for(var g in p)p.hasOwnProperty(g)&&d.hasOwnProperty(g)&&(d[g]=p[g]);return f&&!E(d,n)},isActive:function(t){var e=I(A.call(arguments,1));return this.isActiveIntent(t,e[0],e[1])},trigger:function(){var t=A.call(arguments);w(this,this.currentHandlerInfos,!1,t)},log:null,_willChangeContextEvent:"willChangeContext",_triggerWillChangeContext:function(t,e){w(this,t,!0,[this._willChangeContextEvent,e])},_triggerWillLeave:function(t,e,n){w(this,t,!0,["willLeave",e,n])}},u["default"]=c}),define("router/transition-intent",["./utils","exports"],function(t,e){function n(t){this.initialize(t),this.data=this.data||{}}t.merge;n.prototype={initialize:null,applyToState:null},e["default"]=n}),define("router/transition-intent/named-transition-intent",["../transition-intent","../transition-state","../handler-info/factory","../utils","exports"],function(t,e,n,r,i){var s=t["default"],o=e["default"],a=n["default"],u=r.isParam,c=r.extractQueryParams,h=r.merge,l=r.subclass;i["default"]=l(s,{name:null,pivotHandler:null,contexts:null,queryParams:null,initialize:function(t){this.name=t.name,this.pivotHandler=t.pivotHandler,this.contexts=t.contexts||[],this.queryParams=t.queryParams},applyToState:function(t,e,n,r){var i=c([this.name].concat(this.contexts)),s=i[0],o=(i[1],e.handlersFor(s[0])),a=o[o.length-1].handler;return this.applyToHandlers(t,o,n,a,r)},applyToHandlers:function(t,e,n,r,i,s){var a,u=new o,c=this.contexts.slice(0),l=e.length;if(this.pivotHandler)for(a=0;a<e.length;++a)if(n(e[a].handler)===this.pivotHandler){l=a;break}!this.pivotHandler;for(a=e.length-1;a>=0;--a){var f=e[a],d=f.handler,p=n(d),g=t.handlerInfos[a],v=null;if(v=f.names.length>0?a>=l?this.createParamHandlerInfo(d,p,f.names,c,g):this.getHandlerInfoForDynamicSegment(d,p,f.names,c,g,r,a):this.createParamHandlerInfo(d,p,f.names,c,g),s){v=v.becomeResolved(null,v.context);var m=g&&g.context;f.names.length>0&&v.context===m&&(v.params=g&&g.params),v.context=m}var y=g;(a>=l||v.shouldSupercede(g))&&(l=Math.min(a,l),y=v),i&&!s&&(y=y.becomeResolved(null,y.context)),u.handlerInfos.unshift(y)}if(c.length>0)throw new Error("More context objects were passed than there are dynamic segments for the route: "+r);return i||this.invalidateChildren(u.handlerInfos,l),h(u.queryParams,this.queryParams||{}),u},invalidateChildren:function(t,e){for(var n=e,r=t.length;r>n;++n){{t[n]}t[n]=t[n].getUnresolved()}},getHandlerInfoForDynamicSegment:function(t,e,n,r,i,s,o){{var c;n.length}if(r.length>0){if(c=r[r.length-1],u(c))return this.createParamHandlerInfo(t,e,n,r,i);r.pop()}else{if(i&&i.name===t)return i;if(!this.preTransitionState)return i;var h=this.preTransitionState.handlerInfos[o];c=h&&h.context}return a("object",{name:t,handler:e,context:c,names:n})},createParamHandlerInfo:function(t,e,n,r,i){for(var s={},o=n.length;o--;){var c=i&&t===i.name&&i.params||{},h=r[r.length-1],l=n[o];if(u(h))s[l]=""+r.pop();else{if(!c.hasOwnProperty(l))throw new Error("You didn't provide enough string/numeric parameters to satisfy all of the dynamic segments for route "+t);s[l]=c[l]}}return a("param",{name:t,handler:e,params:s})}})}),define("router/transition-intent/url-transition-intent",["../transition-intent","../transition-state","../handler-info/factory","../utils","exports"],function(t,e,n,r,i){function s(t){this.message=t||"UnrecognizedURLError",this.name="UnrecognizedURLError"}var o=t["default"],a=e["default"],u=n["default"],c=(r.oCreate,r.merge),h=r.subclass;i["default"]=h(o,{url:null,initialize:function(t){this.url=t.url},applyToState:function(t,e,n){var r,i,o=new a,h=e.recognize(this.url);if(!h)throw new s(this.url);var l=!1;for(r=0,i=h.length;i>r;++r){var f=h[r],d=f.handler,p=n(d);if(p.inaccessibleByURL)throw new s(this.url);var g=u("param",{name:d,handler:p,params:f.params}),v=t.handlerInfos[r];l||g.shouldSupercede(v)?(l=!0,o.handlerInfos[r]=g):o.handlerInfos[r]=v}return c(o.queryParams,h.queryParams),o}})}),define("router/transition-state",["./handler-info","./utils","rsvp/promise","exports"],function(t,e,n,r){function i(){this.handlerInfos=[],this.queryParams={},this.params={}}var s=(t.ResolvedHandlerInfo,e.forEach),o=e.promiseLabel,a=n["default"];i.prototype={handlerInfos:null,queryParams:null,params:null,promiseLabel:function(t){var e="";return s(this.handlerInfos,function(t){""!==e&&(e+="."),e+=t.name}),o("'"+e+"': "+t)},resolve:function(t,e){function n(){return a.resolve(t(),o("Check if should continue"))["catch"](function(t){return l=!0,a.reject(t)},o("Handle abort"))}function r(t){var n=h.handlerInfos,r=e.resolveIndex>=n.length?n.length-1:e.resolveIndex;return a.reject({error:t,handlerWithError:h.handlerInfos[r].handler,wasAborted:l,state:h})}function i(t){var r=h.handlerInfos[e.resolveIndex].isResolved;if(h.handlerInfos[e.resolveIndex++]=t,!r){var i=t.handler;i&&i.redirect&&i.redirect(t.context,e)}return n().then(u,null,o("Resolve handler"))}function u(){if(e.resolveIndex===h.handlerInfos.length)return{error:null,state:h};var t=h.handlerInfos[e.resolveIndex];return t.resolve(n,e).then(i,null,o("Proceed"))}var c=this.params;s(this.handlerInfos,function(t){c[t.name]=t.params||{}}),e=e||{},e.resolveIndex=0;var h=this,l=!1;return a.resolve(null,this.promiseLabel("Start transition")).then(u,null,this.promiseLabel("Resolve handler"))["catch"](r,this.promiseLabel("Handle error"))}},r["default"]=i}),define("router/transition",["rsvp/promise","./handler-info","./utils","exports"],function(t,e,n,r){function i(t,e,n,r){function o(){return u.isAborted?a.reject(void 0,l("Transition aborted - reject")):void 0}var u=this;if(this.state=n||t.state,this.intent=e,this.router=t,this.data=this.intent&&this.intent.data||{},this.resolvedModels={},this.queryParams={},r)return void(this.promise=a.reject(r));if(n){this.params=n.params,this.queryParams=n.queryParams;var c=n.handlerInfos.length;c&&(this.targetName=n.handlerInfos[n.handlerInfos.length-1].name);for(var h=0;c>h;++h){var f=n.handlerInfos[h];if(!f.isResolved)break;this.pivotHandler=f.handler}this.sequence=i.currentSequence++,this.promise=n.resolve(o,this)["catch"](function(t){return t.wasAborted||u.isAborted?a.reject(s(u)):(u.trigger("error",t.error,u,t.handlerWithError),u.abort(),a.reject(t.error))},l("Handle Abort"))}else this.promise=a.resolve(this.state),this.params={}}function s(t){return h(t.router,t.sequence,"detected abort."),new o}function o(t){this.message=t||"TransitionAborted",this.name="TransitionAborted"}var a=t["default"],u=(e.ResolvedHandlerInfo,n.trigger),c=n.slice,h=n.log,l=n.promiseLabel;i.currentSequence=0,i.prototype={targetName:null,urlMethod:"update",intent:null,params:null,pivotHandler:null,resolveIndex:0,handlerInfos:null,resolvedModels:null,isActive:!0,state:null,queryParamsOnly:!1,isTransition:!0,promise:null,data:null,then:function(t,e){return this.promise.then(t,e)},abort:function(){return this.isAborted?this:(h(this.router,this.sequence,this.targetName+": transition was aborted"),this.intent.preTransitionState=this.router.state,this.isAborted=!0,this.isActive=!1,this.router.activeTransition=null,this)},retry:function(){return this.abort(),this.router.transitionByIntent(this.intent,!1)},method:function(t){return this.urlMethod=t,this},trigger:function(t){var e=c.call(arguments);"boolean"==typeof t?e.shift():t=!1,u(this.router,this.state.handlerInfos.slice(0,this.resolveIndex+1),t,e)},followRedirects:function(){var t=this.router;return this.promise["catch"](function(e){return t.activeTransition?t.activeTransition.followRedirects():a.reject(e)})},toString:function(){return"Transition (sequence "+this.sequence+")"},log:function(t){h(this.router,this.sequence,t)}},i.prototype.send=i.prototype.trigger,r.Transition=i,r.logAbort=s,r.TransitionAborted=o}),define("router/utils",["exports"],function(t){function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function n(t){var e,n,r=t&&t.length;return r&&r>0&&t[r-1]&&t[r-1].hasOwnProperty("queryParams")?(n=t[r-1].queryParams,e=d.call(t,0,r-1),[e,n]):[t,null]}function r(t){for(var e in t)if("number"==typeof t[e])t[e]=""+t[e];else if(p(t[e]))for(var n=0,r=t[e].length;r>n;n++)t[e][n]=""+t[e][n]}function i(t,e,n){t.log&&(3===arguments.length?t.log("Transition #"+e+": "+n):(n=e,t.log(n)))}function s(t,e){var n=arguments;return function(r){var i=d.call(n,2);return i.push(r),e.apply(t,i)}}function o(t){return"string"==typeof t||t instanceof String||"number"==typeof t||t instanceof Number}function a(t,e){for(var n=0,r=t.length;r>n&&!1!==e(t[n]);n++);}function u(t,e,n,r){if(t.triggerEvent)return void t.triggerEvent(e,n,r);var i=r.shift();if(!e){if(n)return;throw new Error("Could not trigger event '"+i+"'. There are no active handlers")}for(var s=!1,o=e.length-1;o>=0;o--){var a=e[o],u=a.handler;if(u.events&&u.events[i]){if(u.events[i].apply(u,r)!==!0)return;s=!0}}if(!s&&!n)throw new Error("Nothing handled the event '"+i+"'.")}function c(t,n){var i,s={all:{},changed:{},removed:{}};e(s.all,n);var o=!1;r(t),r(n);for(i in t)t.hasOwnProperty(i)&&(n.hasOwnProperty(i)||(o=!0,s.removed[i]=t[i]));for(i in n)if(n.hasOwnProperty(i))if(p(t[i])&&p(n[i]))if(t[i].length!==n[i].length)s.changed[i]=n[i],o=!0;else for(var a=0,u=t[i].length;u>a;a++)t[i][a]!==n[i][a]&&(s.changed[i]=n[i],o=!0);else t[i]!==n[i]&&(s.changed[i]=n[i],o=!0);return o&&s}function h(t){return"Router: "+t}function l(t,n){function r(e){t.call(this,e||{})}return r.prototype=g(t.prototype),e(r.prototype,n),r}var f,d=Array.prototype.slice;f=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var p=f;t.isArray=p;var g=Object.create||function(t){function e(){}return e.prototype=t,new e};t.oCreate=g,t.extractQueryParams=n,t.log=i,t.bind=s,t.forEach=a,t.trigger=u,t.getChangelist=c,t.promiseLabel=h,t.subclass=l,t.merge=e,t.slice=d,t.isParam=o,t.coerceQueryParamsToString=r}),define("router",["./router/router","exports"],function(t,e){var n=t["default"];e["default"]=n}),define("pixy/model",["underscore","when","./namespace","./object","./util","rsvp"],function(t,e,n,r,i,s){var o=[].slice,a=["url","urlRoot","collection","cache"],u=["keys","values","pairs","invert","pick","omit"],c=r.extend({name:"Model",changed:null,validationError:null,idAttribute:"id",constructor:function(e,n){r.call(this,"model",function(){e=e||{},n||(n={}),this.cid=t.uniqueId(this.cidPrefix||"c"),this.attributes={},t.extend(this,t.pick(n,a)),n.parse&&(e=this.parse(e,n)||{}),e=this._assignDefaults(e),this.set(e,n),this.changed={},this.on("sync",this._setServerAttributes,this),this._setServerAttributes()},arguments)},_assignDefaults:function(e){return t.defaults({},e,t.result(this,"defaults"))},_setServerAttributes:function(){this.serverAttrs=t.clone(this.attributes)},initialize:function(){},toString:function(){return[this.name,this.id||this.cid].join("#")},toJSON:function(){return t.clone(this.attributes)},toProps:function(){return this.toJSON()},sync:function(){return n.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(e){return t.escape(this.get(e))},has:function(t){return null!=this.get(t)},set:function(e,n,r){var i,s,o,a,u,c,h,l;if(null==e)return this;if("object"==typeof e?(s=e,r=n):(s={})[e]=n,r||(r={}),this.normalize(s),!this._validate(s,r))return!1;o=r.unset,u=r.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=t.clone(this.attributes),this.changed={}),l=this.attributes,h=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)n=s[i],t.isEqual(l[i],n)||a.push(i),t.isEqual(h[i],n)?delete this.changed[i]:this.changed[i]=n,o?delete l[i]:l[i]=n;if(!u){a.length&&(this._pending=!0);for(var f=0,d=a.length;d>f;f++)this.trigger("change:"+a[f],this,l[a[f]],r)}if(c)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},normalize:function(){},unset:function(e,n){return this.set(e,void 0,t.extend({},n,{unset:!0}))},clear:function(e){var n={};for(var r in this.attributes)n[r]=void 0;return this.set(n,t.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!t.isEmpty(this.changed):t.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?t.clone(this.changed):!1;var n,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e)t.isEqual(i[s],n=e[s])||((r||(r={}))[s]=n);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return t.clone(this._previousAttributes)},fetch:function(e){e=e?t.clone(e):{};var n=this,r=e.success;return e.success=function(t){var i=n.parse(t,e);return n.set(i,e)?(r&&r(n,t,e),void(e.silent||n.trigger("sync",n,t,e))):!1},i.wrapError(this,e),this.sync("read",this,e)},save:function(n,r,i){var s=this,o=e.defer();return(null===n||t.isObject(n))&&(i=r),i=i||{},i.parse=!0,e(this.__save.apply(this,arguments)).then(function(t){return t?o.resolve(s):(console.warn("Model save failed; local validation failure:",s.validationError),o.reject(s.validationError))}).otherwise(function(e){var n;return e.responseJSON?n=e.responseJSON:e.responseText?n=JSON.parse(e.responseText||"{}")||{}:"field_errors"in e?n=e:t.defer(function(){console.error("Unexpected API error:",e)}),console.warn("Model save failed; XHR failure:",n,e),s.trigger("invalid",s,n,t.extend({},i,{validationError:n})),o.reject(n)}),o.promise},__save:function(e,n,r){var s,o,a,u,c=this,h=this.attributes,l=this.isNew();return null==e||"object"==typeof e?(o=e,r=n):(o={})[e]=n,!o||r&&r.wait||this.set(o,r)?(r=t.extend({validate:!0},r),this._validate(o,r)?(o&&r.wait?this.attributes=t.extend({},h,o):o&&this.isNew()&&(this.attributes=t.extend({},h,o)),void 0===r.parse&&(r.parse=!0),s=r.success,r.success=function(e){c.attributes=h;var n=c.parse(e,r);return r.wait&&(n=t.extend(o||{},n)),t.isObject(n)&&!c.set(n,r)?(r.error&&r.error(c,r),!1):(s&&s(c,e,r),c.trigger("sync",c,e,r),void c.trigger(l?"create":"update",c,e,r))},i.wrapError(this,r),a=this.isNew()?"create":r.patch?"patch":"update","patch"===a&&(r.attrs=o),u=this.sync(a,this,r),o&&r.wait&&(this.attributes=h),u):(r.error&&r.error(this,r),!1)):!1},restore:function(t){var e;return this.isNew()?(this.clear({silent:!0}),e=this.set(this._assignDefaults())):e=t?this.set(this.serverAttrs):this.fetch(),s.Promise.cast(e)},destroy:function(){var t=e.defer(),n=this;return e(this.__destroy.apply(this,arguments)).then(function(e){return n._events.sync=null,t.resolve(e),e}).otherwise(function(e){return t.reject(e),e}),t.promise},__destroy:function(t){var e;return t||(t={}),e=t.success,t.success=function(n){this.trigger("destroy",this,this.collection,t),e&&e(this,n,t)}.bind(this),this.isNew()?(t.success({}),s.resolve()):(i.wrapError(this,t),this.sync("delete",this,t))},url:function(){var e,n=t.result(this,"urlRoot")||t.result(this.collection,"url")||i.urlError();return this.isNew()?n:(e="/"===n.charAt(n.length-1)?"":"/",n+e+encodeURIComponent(this.id))},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},t.extend(e||{},{validate:!0}))},_validate:function(e,n){if(!n.validate||!this.validate)return!0;e=t.extend({},this.attributes,e);var r=this.validationError=this.validate(e,n)||null;return r?(this.trigger("invalid",this,r,t.extend(n||{},{validationError:r})),!1):!0}});return t.each(u,function(e){c.prototype[e]=function(){var n=o.call(arguments);return n.unshift(this.attributes),t[e].apply(t,n)}}),c}),define("pixy/deep_model",["underscore","./model"],function(t,e){function n(e){var r={},i=o.keyPathSeparator;for(var s in e){var a=e[s];if(a&&a.constructor===Object&&!t.isEmpty(a)){var u=n(a);for(var c in u){var h=u[c];r[s+i+c]=h}}else r[s]=a}return r}function r(e,n,r){for(var i=o.keyPathSeparator,s=n.split(i),a=e,u=0,c=s.length;c>u;u++){if(r&&!t.has(a,s[u]))return!1;if(a=a[s[u]],null==a&&c-1>u&&(a={}),"undefined"==typeof a)return r?!0:a}return r?!0:a}function i(e,n,r,i){i=i||{};for(var s=o.keyPathSeparator,a=n.split(s),u=e,c=0,h=a.length;h>c&&void 0!==u;c++){var l=a[c];c===h-1?i.unset?delete u[l]:u[l]=r:("undefined"!=typeof u[l]&&t.isObject(u[l])||(u[l]={}),u=u[l])}}function s(t,e){i(t,e,null,{unset:!0})}var o=e.extend({_assignDefaults:function(e){return e=t.merge({},t.result(this,"defaults"),e)},toJSON:function(){return t.cloneDeep(this.attributes)},get:function(t){return r(this.attributes,t)},set:function(e,a,u){var c,h,l,f,d,p,g,v;if(null==e)return this;if("object"==typeof e?(h=e,u=a||{}):(h={})[e]=a,u||(u={}),!this._validate(h,u))return!1;l=u.unset,d=u.silent,f=[],p=this._changing,this._changing=!0,p||(this._previousAttributes=t.cloneDeep(this.attributes),this.changed={}),v=this.attributes,g=this._previousAttributes,this.idAttribute in h&&(this.id=h[this.idAttribute]),h=n(h);for(c in h)a=h[c],t.isEqual(r(v,c),a)||f.push(c),t.isEqual(r(g,c),a)?s(this.changed,c):i(this.changed,c,a),l?s(v,c):i(v,c,a);if(!d){f.length&&(this._pending=!0);for(var m=o.keyPathSeparator,y=0,x=f.length;x>y;y++){var e=f[y];this.trigger("change:"+e,this,r(v,e),u);for(var _=e.split(m),b=_.length-1;b>0;b--){var w=t.first(_,b).join(m),P=w+m+"*";this.trigger("change:"+P,this,r(v,w),u)}}}if(p)return this;if(!d)for(;this._pending;)this._pending=!1,this.trigger("change",this,u);return this._pending=!1,this._changing=!1,this},clear:function(e){var r={},i=n(this.attributes);for(var s in i)r[s]=void 0;return this.set(r,t.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!t.isEmpty(this.changed):void 0!==r(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n(this.changed):!1;var r=this._changing?this._previousAttributes:this.attributes;e=n(e),r=n(r);var i,s=!1;for(var o in e)t.isEqual(r[o],i=e[o])||((s||(s={}))[o]=i);return s},previous:function(t){return null!=t&&this._previousAttributes?r(this._previousAttributes,t):null},previousAttributes:function(){return t.cloneDeep(this._previousAttributes)}});return o.keyPathSeparator=".",o}),define("pixy/util/wrap",[],function(){var t=function(){};return function(e,n,r){return e=e||t,function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(e),n.apply(r,t)}}}),define("pixy/collection",["underscore","./namespace","./object","./model","./util","./util/wrap"],function(t,e,n,r,i,s){var o=[],a=o.push,u=o.slice,c=o.splice,h={set:{add:!0,remove:!0,merge:!0},add:{add:!0,merge:!1,remove:!1}},l=h.set,f=h.add,d=["url","model","cache","comparator"],p=n.extend({name:"Collection",meta:{},constructor:function(e,r){r||(r={}),d.forEach(function(t){r.hasOwnProperty(t)&&(this[t]=r[t])}.bind(this)),n.call(this,"collection",function(){this._reset(),e&&this.reset(e,t.extend({silent:!0,parse:!0}))},arguments)},model:r,toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},toProps:function(){return this.invoke("toProps")},sync:function(){return e.sync.apply(this,arguments)},add:function(e,n){return this.set(e,t.defaults(n||{},f))},remove:function(e,n){e=t.isArray(e)?e.slice():[e],n||(n={});var r,i,s,o;for(r=0,i=e.length;i>r;r++)o=this.get(e[r]),o&&(delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,n.silent||(n.index=s,o.trigger("remove",o,this,n)),this._removeReference(o));return this},set:function(e,n){n=t.defaults(n||{},l),n.parse&&(e=this.parse(e,n)),t.isArray(e)||(e=e?[e]:[]);var r,i,s,o,u,h=n.at,f=this.comparator&&null==h&&n.sort!==!1,d=t.isString(this.comparator)?this.comparator:null,p=[],g=[],v={};for(r=0,i=e.length;i>r;r++)(s=this._prepareModel(e[r],n))&&((o=this.get(s))?(n.remove&&(v[o.cid]=!0),n.merge&&(o.set(s.attributes,n),f&&!u&&o.hasChanged(d)&&(u=!0))):n.add&&(p.push(s),s.on("all",this._onModelEvent,this),this._byId[s.cid]=s,null!=s.id&&(this._byId[s.id]=s)));if(n.remove){for(r=0,i=this.length;i>r;++r)v[(s=this.models[r]).cid]||g.push(s);g.length&&this.remove(g,n)}if(p.length&&(f&&(u=!0),this.length+=p.length,null!=h?c.apply(this.models,[h,0].concat(p)):a.apply(this.models,p)),u&&this.sort({silent:!0}),n.silent)return this;for(r=0,i=p.length;i>r;r++)(s=p[r]).trigger("add",s,this,n);return u&&this.trigger("sort",this,n),this.broadcastSync(),this},reset:function(e,n){n||(n={});for(var r=0,i=this.models.length;i>r;r++)this._removeReference(this.models[r]);return n.previousModels=this.models,this._reset(),this.add(e,t.extend({silent:!0},n)),n.silent||(this.trigger("reset",this,n),this.broadcastSync()),this},resetMeta:function(){this.meta={}},broadcastSync:function(){this.forEach(function(t){t.trigger("sync",t)})},push:function(e,n){return e=this._prepareModel(e,n),this.add(e,t.extend({at:this.length},n)),e},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(e,n){return e=this._prepareModel(e,n),this.add(e,t.extend({at:0},n)),e},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(e,n){return t.isEmpty(e)?n?void 0:[]:this[n?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},findNew:function(){return this.find(function(t){return t.isNew()})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),t.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(t.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this
},sortedIndex:function(e,n,r){n||(n=this.comparator);var i=t.isFunction(n)?n:function(t){return t.get(n)};return t.sortedIndex(this.models,e,i,r)},pluck:function(e){return t.invoke(this.models,"get",e)},fetch:function(e){return e=e?t.clone(e):{},void 0===e.parse&&(e.parse=!0),e.xhrSuccess=t.bind(this.parseLinkPagination,this),e.success=s(e.success,function(t,n){var r=e.reset?"reset":"set";this[r](n,e),t(this,n,e),this.trigger("fetch",this,n,e)},this),i.wrapError(this,e),this.sync("read",this,e)},fetchNext:function(e){var n=this;return e=e||{},this.meta.currentPage=e.page||this.meta.nextPage,e=t.extend({},e,{xhrSuccess:t.bind(this.parseLinkPagination,this)}),this.sync("read",this,e).then(function(t){n.add(t,{parse:!0}),n.meta.hasMore?n.meta.remainder=n.meta.totalCount-n.length:(n.meta.remainder=0,n.meta.totalCount=n.length)})},fetchAll:function(t){return t=t||{},"page"in t&&delete t.page,this.meta.nextPage=1,function e(n){return n.fetchNext(t).then(function(){return n.meta.hasMore?e(n):n})}(this)},create:function(e,n){if(n=n?t.clone(n):{},!(e=this._prepareModel(e,n)))return!1;n.wait||this.add(e,n);var r=this,i=n.success;return n.success=function(t){n.wait&&r.add(e,n),i&&i(e,t,n)},e.save(null,n),e},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={},this.resetMeta()},_prepareModel:function(t,e){if(t instanceof r)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))},toString:function(){return[this.name,this.id||this.cid].join("#")},parseLinkPagination:function(e,n,r){var i,s,o=r.getResponseHeader("Link"),a=r.getResponseHeader("X-Total-Count"),u={totalCount:void 0,remainder:void 0},c=function(t){function e(t,e){for(var n,r=[];n=e.exec(t);)r.push({rel:n[2],href:n[1],page:parseInt(/page=(\d+)/.exec(n[1])[1],10)});return r}var n=e(t,RegExp('<([^>]+)>; rel="([^"]+)",?s*',"g"));return n};return u.link=c(o),i=t.find(u.link,{rel:"next"}),s=t.find(u.link,{rel:"last"}),u.perPage=parseInt((/per_page=(\d+)/.exec(o)||[])[1]||0,10),u.hasMore=!!i,a?u.totalCount=parseInt(a,10):s&&(u.totalCount=u.perPage*s.page),void 0!==u.totalCount&&(u.remainder=u.totalCount-this.models.length),i&&(u.nextPage=i.page),this.meta=u,u}}),g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];t.each(g,function(e){p.prototype[e]=function(){var n=u.call(arguments);return n.unshift(this.models),t[e].apply(t,n)}});var v=["groupBy","countBy","sortBy"];return t.each(v,function(e){p.prototype[e]=function(n,r){var i=t.isFunction(n)?n:function(t){return t.get(n)};return t[e](this.models,i,r)}}),p.setDefaultOptions=function(e,n){t.extend(h[e],n)},p}),define("pixy/core/history",["underscore","../namespace","../util/extend","../mixins/events"],function(t,e,n,r){var i=e.$,s=function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e},o=function(){this.handlers=[],t.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},a=/^[#\/]|\s+$/g,u=/^\/+|\/+$/g,c=/msie [\w.]+/,h=/\/$/;return o.started=!1,t.extend(o.prototype,r,{interval:50,trackerLimit:50,routeHistory:[],getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(h,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(a,"")},start:function(e){if(o.started)throw new Error("Pixy.history has already been started");o.started=!0,this.options=t.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,s=c.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(u,"/"),s&&this._wantsHashChange&&(this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?i(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?i(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var h=this.location,l=h.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!l?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):void(this._wantsPushState&&this._hasPushState&&l&&h.hash&&(this.fragment=this.getHash().replace(a,""),this.history.replaceState({},document.title,this.root+this.fragment+h.search)))},stop:function(){i(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),o.started=!1},checkUrl:function(){var t=this.getFragment();return console.debug("Hash/URL changed:",t),t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.onHashChange&&this.onHashChange(t),void(this.iframe&&this.navigate(t)))},navigate:function(e,n){var r,i;return e=this.getFragment(e),(r=this.fragment!==e)?(i=this.__navigate(e,n),t.last(this.routeHistory)!==e&&this.routeHistory.push(e),this.routeHistory.length>this.trackerLimit&&this.routeHistory.splice(0,1),this.trigger("navigate",e),i):!0},__navigate:function(t,e){var n;if(!o.started)return!1;if(e||(e={}),this.fragment=t,n=this.root+t,this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);s(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),s(this.iframe.location,t,e.replace))}}}),new o}),define("pixy/core/router",["router","../ext/jquery","rsvp","./history"],function(t,e,n,r){function i(t){return t=String(t||""),"/"!==t[0]&&(t="/"+t),t}function s(t){return u.transitionTo(i(t))}function o(t){var n=e.consume(t);return s(e(t.currentTarget).attr("href")),n}var a,u,c=(e.consume,window.history);return u=new t["default"],u.updateURL=function(t){console.info("History URL has changed to:",t),this.navigate(t,{silent:!0,trigger:!1,replace:a}),a=!1}.bind(r),u.start=function(t){var u,h,l;if(!this.getHandler)throw"#getHandler() must be defined before starting the router!";return t=t||{},u=t.root||"/",t.locale&&(u+=t.locale),r.onHashChange=function(t){console.debug("Hash/URL changed:",i(t)),a=!0,s(t)},r.start({pushState:t.pushState,root:u,silent:!0}),e(document).on("click.appRouter",'a[href^="/"][target!=_blank]',o),t.preload?(h=i(r.fragment),l=r.location.search,a=!0,s(h).followRedirects().then(function(){t.pushState&&c.pushState&&c.replaceState({},document.title,u+i(r.fragment)+l)})):n.resolve()},u.stop=function(){e(document).off("click.appRouter"),r.onHashChange=null,r.stop()},u}),define("pixy/util/get",[],function(){var t=function(t,e){var n=this[t];return n&&n.promise?(console.assert(e&&e.call,"You must provide a callback to yield with a promise attribute: "+t),n.promise.then(e.bind(this))):n&&this[t].call?this[t].call(this):n};return t}),define("pixy/core/registry",["underscore","../object"],function(t,e){var n=Object.defineProperty,r=e.extend({name:"Registry",dependencies:[],targets:["model","collection","view","router","object"],options:{mute:!0},constructor:function(){this.reset()},destroy:function(){this.reset()},registerModule:function(t,e){var n;n=this.moduleEntry(t),n.module=e,this.debug("Module defined:",n.id),this.resolve(n)},addDependency:function(t,e){var n,r;n=this.moduleEntry(t),n.dependants.push(e),this.debug("dependency:","["+e+"] => ["+n.id+"]"),"Router"===e.toString()?this.debug(e):e.toString().match(/object/)&&this.debug(e),r=n.module,r&&this.resolve(n)},get:function(t){return this.modules[t]?this.modules[t].module:void 0},resolve:function(e){var r,i=e.id,s=e.module,o=[],a=this.mkModuleId("init with "+i),u=this;return t.isEmpty(e.dependants)?[]:(r=t.isFunction(s.onDependency),t.each(e.dependants,function(t){if(t[i]&&t[i]!=s)throw i+" is already assigned in "+t;n(t,i,{get:function(){return u.modules[i].module}}),t[a]&&t[a](s),r&&s.onDependency(t),o.push(t.toString())}),this.debug(s+" =>",o.length,"dependencies have been resolved (",o.join(", "),")"),e.dependants=[],o)},checkObject:function(e){e.module&&this.registerModule(e.module,e),t.isArray(e.requires)&&t.each(e.requires,function(t){this.addDependency(t,e)},this)},moduleEntry:function(t){var e;return t=this.mkModuleId(t),e=this.modules[t],e||(e=this.modules[t]={id:t,module:null,dependants:[]}),e},mkModuleId:function(e){if(!t.isString(e))throw"Bad module declaration '"+JSON.stringify(e)+"' (expected a String)";return(e||"").replace(/\s/g,"_").replace(/_+/g,"_").underscore().camelize(!0)},reset:function(){this.modules={}},unregister:function(t){delete this.modules[this.mkModuleId(t)]}});return new r}),define("pixy/route",["underscore","./util/extend","./util/get","./namespace","./core/registry","./core/router","./mixins/events"],function(t,e,n,r,i,s,o){function a(t,e,n){var r=u(this,e),s=d(r),o=h(r,g),a=r.mixins||[];return-1===a.indexOf(y)&&a.push(y),mixinProps=a.reduce(function(t,e){var n=e.mixinProps;return u(t,n),t},{}),u(this,c(mixinProps,s),{name:t}),g.forEach(function(t){var e=o[t],n=f(l(a,t)),r=n.length;this[t]=function(){var t,i;for(i=0;r>i;++i)if(t=n[i].apply(this,arguments),void 0!==t)return t;return e?e.apply(this,arguments):void 0},this["__"+t]=e}.bind(this)),n||m(t,this),i.checkObject(this),this}var u=t.extend,c=t.omit,h=t.pick,l=t.pluck,f=t.compact,d=t.keys,p={},g=["beforeModel","model","afterModel","enter","exit"],v=["willTransition","didTransition"],m=(g.concat(v),function(t,e){p[t]=e}),y={exit:function(){this.stopListening()}};return u(a.prototype,o,{get:n,transitionTo:s.transitionTo.bind(s),replaceWith:s.replaceWith.bind(s),trigger:s.trigger.bind(s),toString:function(){return this.name},modelFor:function(t){return console.assert(p[t],'No route by name of "'+t+'"'),p[t].context},reload:function(){return this.__model()},injectStoreError:function(t,e,n){2===arguments.length&&(n=e,e=t),this.trigger("storeError",{actionIndex:e,error:n})}}),a.extend=e.withoutMixins,r.routeMap=p,r.registerRoute=m,a}),define("pixy/util/wrap_array",[],function(){return function(t){return Array.isArray(t)?t:[t]}}),define("pixy/store",["require","underscore","./mixins/logger","./mixins/events","./core/dispatcher","./core/registry","./util/extend","./util/wrap_array","rsvp","inflection"],function(t){function e(t){return t?[v,t].join(":"):void 0}function n(t){return t?[m,t].join(":"):void 0}function r(t){var e=this.actions[t.id];return new d.Promise(function(n,r){var i=this._actionEmitter(t,n),s=this._errorPropagator(t,r);if(e)try{e.call(this,t.payload,i,s)}catch(o){s(o)}else this.onAction(t.type,t.payload,i,s),n()}.bind(this))}function i(t,e,n,r){r&&r.listenTo?r.listenTo(t,e,n):t.on(e,n,r)}function s(t,e,n,r){r&&r.listenTo?r.stopListening(t,e,n):t.off(e,n,r)}var o=t("underscore"),a=t("./mixins/logger"),u=t("./mixins/events"),c=t("./core/dispatcher"),h=t("./core/registry"),l=t("./util/extend"),f=t("./util/wrap_array"),d=t("rsvp"),p=(t("inflection"),o.extend),g="change",v="actionSuccess",m="actionError",y="responseJSON",x=function(t,e){p(this,e,{name:t}),this._key=t.underscore().replace(/_store$/,"").camelize(!0),c.register(r.bind(this)),h.checkObject(this),this.initialize&&this.initialize()};return p(x.prototype,a,u,{name:"GenericStore",actions:{},emitChange:function(t,e){this.debug("Broadcasting change."),t&&this.trigger("change:"+t,e),this.trigger(g)},emitActionSuccess:function(t,n){this.debug("Broadcasting action success:",t),this.trigger(e(t),n,t),this.trigger(v,t,n)},emitActionError:function(t,e,r){this.warn("Broadcasting action error:",t,"#",e),this.warn(r,r&&r.stack?r.stack:void 0),this.trigger(n(t),e,r),this.trigger(m,t,e,r)},addChangeListener:function(t,e){i(this,g,t,e)},removeChangeListener:function(t,e){s(this,g,t,e)},addActionSuccessListener:function(t,n,r){var s=this;f(t).forEach(function(t){i(s,e(t),n,r)})},removeActionSuccessListener:function(t,n,r){s(this,e(t),n,r)},addActionErrorListener:function(t,e,r){i(this,n(t),e,r)},removeActionErrorListener:function(t,e,r){s(this,n(t),e,r)},addErrorListener:function(t,e){i(this,m,t,e)},removeErrorListener:function(t,e){s(this,m,t,e)},onAction:function(){},_errorPropagator:function(t,e){return function(n){n&&o.isObject(n)&&y in n&&(n=n.responseJSON),this.emitActionError(t.type,t.index,n),e(n)}.bind(this)},_actionEmitter:function(t,e){return function(n,r){this.emitActionSuccess(t.type,t.index),this.emitChange(n,r),e(r)}.bind(this)},toString:function(){return this.name}}),x.extend=l,x}),define("pixy/logging_context",["underscore","./mixins/logger"],function(t,e){var n=function(t){this.toString=function(){return t}};return t.extend(n.prototype,e),n}),define("pixy/core/cache",["underscore","../namespace","../object","../model","../deep_model","../collection"],function(t,e,n,r,i,s){var o,a=!1,u=!1,c=function(t,e,n){return"function"==typeof t[e]?t[e].call(n||this):t[e]},h={Model:{updateOn:"sync",purgeOn:"clear destroy"},Collection:{updateOn:"add sync remove",purgeOn:"reset"}},l=function(t){return t=t||{},t.noCache?!1:void 0===t.useCache?u&&a:u&&t.useCache},f=function(e){var n=t.clone(e._cacheEvents),r=e.cache.updateOn||e.cache.events,i=e.cache.purgeOn;return void 0===e.cache.updateOn&&(r=n.updateOn),void 0===e.cache.purgeOn&&(i=n.purgeOn),{updateOn:r,purgeOn:i}},d={addCacheListeners:function(){if(!this.cache.manual){var t=this._cacheEvents;return t.updateOn&&this.on(t.updateOn,this.updateCacheEntry,this),t.purgeOn&&this.on(t.purgeOn,this.purgeCacheEntry,this),!0}},removeCacheListeners:function(){if(!this.cache.manual){var t=this._cacheEvents;return t.updateOn&&this.off(t.updateOn,this.updateCacheEntry,this),t.purgeOn&&this.off(t.purgeOn,this.purgeCacheEntry,this),!0}},fetchCached:function(t){return t=t||{},t.cached=!0,t.transport="localStorage",t.data=this.getCacheEntry(),e.sync.call(this,"read",this,t)},getCacheEntry:function(){var t;return u?(t=c(this.cache,"key",this),o.get(t)):null},updateCacheEntry:function(e,n,r){var i,s={},a=c(this.cache,"key",this);return!this.cacheDisabled&&u&&a?r&&r.cached?this:(this.cache.usePrefix?(i=t.isBoolean(this.cache.usePrefix)?c(this.cache,"key",this):c(this.cache,"usePrefix",this),s[i]=this.toJSON()):s=this.toJSON(),o.set(a,s),this):this},purgeCacheEntry:function(){var t=c(this.cache,"key",this);return!this.cacheDisabled&&l({})&&t?(o.remove(t),this):this},disableCaching:function(){return this.cacheDisabled||(this.cacheDisabled=!0,console.warn(this.toString()+": caching disabled.")),this},enableCaching:function(){return this.cacheDisabled&&delete this.cacheDisabled,this}},p={sync:function(t,e,n){if(n=n||{},"read"===t){var r=n.success,i=l(n),s=this;if(n.success=function(t,e){var n=r&&r(t,e);return e.cached||s.cache.manual||s.updateCacheEntry(),n},i)return this.fetchCached(n)}return this._noCache.sync.apply(this,arguments)},set:function(e,n,r){var i=this._noCache.set.apply(this,arguments);return e?(t.isObject(e)&&(r=n),r=r||{},this._changing||r.silent||this.cache.manual||this.updateCacheEntry(),i):i},clear:function(){return this.cache.manual||this.purgeCacheEntry(),this._noCache.clear.apply(this,arguments)}},g={sync:function(t,e,n){if(n=n||{},"read"==t){var r=this,i=n.success,s=n.complete,o=l(n),a=n.xhrSuccess;if(n.xhrSuccess=function(){a.apply(this,arguments),n.cached?(r.meta.totalCount=r.length,r.meta.remainder=0,r.meta.cached=!0):r.meta.cached=!1},n.success=function(){var t;return i&&(t=i.apply(i,arguments)),n.cached||r.updateCacheEntry(),t},n.complete=function(){return r.addCacheListeners(),s?s.apply(s,arguments):void 0},this.removeCacheListeners(),o)return this.fetchCached(n)}return this._noCache.sync.apply(this,arguments)}},v={Model:p,Collection:g},m=n.extend({name:"Cache",options:{preloadingEnabled:!0,events:{}},constructor:function(e){e=e||{};var n=function(t,e){t.prototype.klass||(t.prototype.klass=e)},i=function(t,e){var n,r=t.prototype,i=v[e];r._noCache={};for(n in i)r._noCache[n]=r[n]};t.merge(h,this.options.events,e.events),n(r,"Model"),n(s,"Collection"),i(r,"Model"),i(s,"Collection")},destroy:function(){t.each([r,s],function(t){delete t.prototype._noCache,delete t.prototype.klass})},makeCacheable:function(n){if(n.cache&&t.isObject(n.cache)){var r=n.klass,i=h[r],s=v[r],o=[];for(var a in s)n[a]&&o.push(a);if(o.length&&(n._noCache=t.clone(e[r].prototype._noCache),t.each(o,function(t){n._noCache[t]=n[t]})),t.extend(n,d,s,{_cacheEvents:t.clone(i)}),n._cacheEvents=f(n),n.addCacheListeners(),n.cache.preload&&this.options.preloadingEnabled){var c=function(){return u?void n.set(n.getCacheEntry()):void console.error("can not preload",n.id,"as cache is not available.")};u?c():t.defer(c)}}},setAdapter:function(e){return t.each(["set","get","remove","clear"],function(n){var r=e[n];if(!t.isFunction(r))throw new TypeError([this.name,"bad adapter: missing method implemention #",n].join(" "))}),o=e,this.trigger("adapter_installed",this,o)},getAdapter:function(){return o},setAvailable:function(t){return this.__ensureAdapterSet(),u=t,this.trigger("available",this)},isAvailable:function(){return this.__ensureAdapterSet(),u},enable:function(){return!this.isEnabled()&&(a=this.isAvailable())&&this.trigger("enabled",this),this},disable:function(){return a=!1,this.trigger("disabled",this)},isEnabled:function(){return this.isAvailable()&&a},__ensureAdapterSet:function(){if(!o)throw this.name+": you must set an adapter first! use #setAdapter"}});return new m}),define("pixy/core/mutator",["underscore","../object","../namespace"],function(t,e,n){var r=e.extend({name:"Mutator",targets:["model","collection","view","router","object"],constructor:function(){this.reset(),t.forEach(this.targets,this.__sniff,this)},add:function(e){if(e=t.extend({},{priority:100,stage:"after"},e),!t.isFunction(e.mutation))throw console.error("Missing required mutation function. Options passed:",e),'Missing required "mutation" function';if(!t.contains(["before","after"],e.stage))throw'Invalid mutation stage "'+e.stage+'", can either be  "before" or "after"';t.each(e.targets,function(t){var n=this.mutations[e.stage][t];if(!n)throw'Unknown mutation target "'+t+'"';n.push({name:e.name,mutation:e.mutation,stage:e.stage,priority:e.priority})},this)},destroy:function(){this.stopListening(n),this.reset()},reset:function(){this.mutations=t.reduce(this.targets,function(t,e){return t.before[e]=[],t.after[e]=[],t},{before:{},after:{}})||{}},__sniff:function(t){var e=this.mutations.before,r=this.mutations.after;this.listenTo(n,t+":creating",function(n){this.__run(n,e[t],t)}),this.listenTo(n,t+":created",function(e){this.__run(e,r[t],t)})},__run:function(e,n,r){var i=this;t.chain(n).sortBy("priority").each(function(t){try{t.mutation(e,r)}catch(n){i.warn('Exception caught in mutation "'+t.name+'":'),console.error(n.stack||n.message)}})}});return new r}),define("pixy/util/inherit",["underscore"],function(t){var e=function(n,r,i){var s,o=Object.getPrototypeOf(n);return i=i||[],o&&(i=e(o,r,i)),s=t.result(n,r),s&&(i=t.union(i,s)),i},n=function(e,r,i){var s=Object.getPrototypeOf(e);return i=i||{},s&&n(s,r,i),t.merge(i,t.result(e,r)),i};return function(r,i,s,o){var a,u;return a=t.isObject(s)?s:{dontOverride:s,isArray:o},u=a.isArray?e(r,i,[]):n(r,i,{}),a.dontOverride||(r[i]=u),u}}),define("pixy/mutations/attribute_inheritance",["underscore","../util/inherit"],function(t,e){return{stage:"before",targets:["model","view","collection","router"],priority:1,mutation:function(n){var r=e(n,"inherits",!0,!0);r&&r.length&&t.each(r,function(t){var r="@"==t[0];r&&(t=t.substr(1)),e(n,t,!1,r)})}}}),define("pixy/mutations/caching",["underscore"],function(t){return{stage:"before",targets:["model","collection"],priority:100,mutation:function(e){t.isObject(e.cache)&&Pixy.Cache.makeCacheable(e)}}}),define("pixy/mutations/registration",["../core/registry"],function(t){return{stage:"after",priority:100,targets:["model","collection","view","router","object"],mutation:function(e){t.checkObject(e)}}}),define("pixy/mixins/filterable_collection",["underscore","../collection","../model"],function(t,e,n){function r(t,e){return t!==e}var i=n.extend({idAttribute:"name",defaults:{attr:"",value:null},fn:function(){},toString:function(){return[this.get("attr"),this.get("value")].join(" -> ")}}),s=function(){t.extend(this,{_filters:new e({model:i}),_fmodels:[]}),this.filterOptions=this.filterOptions||{},t.defaults(this.filterOptions,{resetOn:"fetch reset"}),this.on(this.filterOptions.resetOn,this.resetFilters,this),this.resetFilters()},o={addFilter:function(t,e,n){var i,s;return n=n||{},i=n.condition||r,s=this._filters.add({name:n.name||t,attr:t,value:e}).last(),s.fn=i,this},removeFilter:function(t){var e=this._filters.get(t);return this.log("Filter removed:",e),this._filters.remove(e),this},applyFilters:function(){return this._filters.length?(this.trigger("filtering",this),this._filters.each(function(e){var n=[],r=this._filtersInverted;this.each(function(t){var i=e.fn(t.get(e.get("attr")),e.get("value"),t);r&&(i=!i),i&&n.push(t)}),t.each(n,function(t){t.trigger("filter:applied",t),this.remove(t),this._fmodels.push(t)},this)},this),this.trigger("filtered",this),this):this._fmodels.length?this.resetFilters():this},resetFilters:function(e){return e=e||{},e.silent||this.trigger("unfiltering",this),this._fmodels.length&&t.each(this._fmodels,function(t){this.add(t),t.trigger("filter:reset",t)},this),this._fmodels=[],this._filters.reset(),e.silent||this.trigger("unfiltered",this),this},hasFilters:function(){return!!this._filters.length},invertFilters:function(t){this._filtersInverted=t}};return function(e){t.extend(e,o),s.apply(e,[])}}),define("pixy/ext/underscore",["underscore"],function(){var t=_.defer;return _.defer=function(e,n){return t(n?_.bind.apply(null,arguments):e)},_}),define("pixy/config",["./ext/underscore","./namespace"],function(t,e){var n=t.extend,r={};return r.isAuthenticated=function(){return!1},r.getCurrentLayoutName=function(){},r.defaultAccessPolicy=void 0,r.getDefaultWindowTitle=function(){return"Pixy"},r.getRootRoute=function(){return e.routeMap.root},e.configure=function(t){n(r,t)},r}),define("pixy/mixins/routes/access_policy",["../../config","rsvp"],function(t,e){var n=void 0,r=function(t){return[t.intent.url,t.targetName].join(" => ")};return{mixinProps:{accessPolicy:t.defaultAccessPolicy,isAccessible:function(){var e=t.isAuthenticated();return"public"===this.accessPolicy&&e?!1:"private"!==this.accessPolicy||e?!0:!1}},beforeModel:function(t){return this.isAccessible()?n:"public"===this.accessPolicy?(console.warn("Over-privileged access to:",r(t)),e.reject("Overauthorized")):(console.warn("Unprivileged access to:",r(t)),e.reject("Unauthorized"))}}}),define("pixy/mixins/routes/loading",[],function(){var t=function(t){return!!t.router.currentHandlerInfos};return{model:function(e,n){t(n)&&this.__model&&(this.trigger("loading",!0),this._loading=!0,console.info(this.name,"Loading"))},afterModel:function(){this._loading&&(console.info(this.name,"Hiding loading status."),this._loading=!1,this.trigger("loading",!1))}}}),define("pixy/mixins/routes/props",["underscore","../../config"],function(t,e){var n,r=t.uniq,i=t.keys,s=function(t,e){return r(i(e).concat(t||[]))},o=function(t,r,i){n||(n=e.getRootRoute()),console.assert(n,"You must assign a root route that responds to #update and #ready() to use the PropsMixin."),n.ready(function(){r.trigger("update",t),i&&i.call(r)})};return{mixinProps:{_propKeys:[],update:function(t){o(t,this,function(){this._propKeys=s(this._propKeys,t)})}},afterModel:function(t){this.context=this.context||t},exit:function(){var t=this._propKeys.reduce(function(t,e){return t[e]=void 0,t},{});o(t,this)}}}),define("pixy/mixins/routes/renderer",["../../config"],function(t){var e={mixinProps:{views:[],mount:function(t,e,n){this.trigger("render",t,e,n)},unmount:function(t,e,n){this.trigger("remove",t,e,n)},shouldUnmount:function(){return!0}},enter:function(){var e=this.mount.bind(this);this.views.forEach(function(n){var r=n.into,i=n.options||{};n.into||(r=n.into=t.getCurrentLayoutName(),console.assert(r,"RendererMixin: you must specify a layout name using 'into' or define Pixy.Config#getCurrentLayoutName().")),n.outlet&&(i.outlet=n.outlet,n.options=i),e(n.component,r,i)})},exit:function(){var t;this.shouldUnmount()&&(t=this.unmount.bind(this),this.views.forEach(function(e){t(e.component,e.into,e.options)}))}};return e}),define("pixy/mixins/routes/secondary_transitions",["underscore"],function(t){function e(){}function n(t){return t.isSecondary}function r(t){return!n(t)}function i(t){e(t,"transitioning to a secondary route, I won't re-load on next enter."),t._contextResolved=!0,t._previousContext=t._context}function s(t){return t._contextResolved===!0}function o(t){e(t,"releasing guards"),t._contextResolved=t._context=t._previousContext=null}var a,u,c=t.pluck,h=(Array.prototype.slice,!0);return{model:function(){return s(this)?(e(this,"I'm considering myself already loaded."),this._previousContext):void 0},afterModel:function(t){r(this)&&(this._context=t)},enter:function(){return s(this)?(e(this,"	blocking #enter"),o(this),h):void 0},exit:function(){return s(this)?(e(this,"	blocking #exit"),h):void 0},willTransition:function(t){var e=t.router,h=e.getHandler(t.targetName),l=t.pivotHandler;return n(h)&&r(this)?(u=c(e.currentHandlerInfos,"handler"),u.forEach(i),a):void(u&&r(h)&&!s(h)&&(u.forEach(o),u.forEach(function(t){t!==l&&t.exit()}),u=void 0))}}}),define("pixy/mixins/routes/window_title",["../../config"],function(t){var e;return{mixinProps:{windowTitle:function(){return t.getDefaultWindowTitle()}},enter:function(){var t=this.get("windowTitle");t&&(e=document.title,document.title=t)},exit:function(){e&&(document.title=e,e=null)}}}),define("pixy/mixins/routes",["./routes/access_policy","./routes/loading","./routes/props","./routes/renderer","./routes/secondary_transitions","./routes/window_title"],function(t,e,n,r,i,s){var o={};return o.AccessPolicy=t,o.Loading=e,o.Props=n,o.Renderer=r,o.SecondaryTransitions=i,o.WindowTitle=s,o}),define("pixy/mixins",["./mixins/routes"],function(t){var e={};return e.Routes=t,e}),define("pixy/main",["underscore","inflection","when","rsvp","./ext/react","./ext/jquery","router","./namespace","./object","./model","./deep_model","./collection","./core/router","./route","./store","./logging_context","./core/registry","./core/cache","./core/dispatcher","./core/mutator","./mutations/attribute_inheritance","./mutations/caching","./mutations/registration","./mixins/filterable_collection","./mixins/logger","./mixins"],function(t,e,n,r,i,s,o,a,u,c,h,l,f,d,p,g,v,m,y,x,_,b,w,P,A){return a.Object=u,a.Model=c,a.DeepModel=h,a.Collection=l,a.Route=d,a.Store=p,a.Logger=P,a.LoggingContext=g,a.Mutator=x,a.Registry=v,a.Cache=m,a.Dispatcher=y,a.ApplicationRouter=f,a.Mutator.add(_),a.Mutator.add(b),a.Mutator.add(w),a.Mixins=A,console.info("Pixy",a.VERSION,"initialized."),a.start=function(){return f.start()},a}),define("pixy",["pixy/main"],function(t){return t});